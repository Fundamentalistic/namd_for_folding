
\section{Input and Output Files}
\label{section:files}

\NAMD\ was developed to be compatible with existing 
molecular dynamics packages, 
especially the packages X-PLOR 
\mycite{(Br\"unger, 1992)}{BRUN92b}  
and CHARMM \mycite{(Brooks \ETAL, 1983)}{BROO83}.  
To achieve this compatibility,
the set of input files which \NAMD\ uses to define 
a molecular system are identical to the input files used by X-PLOR and CHARMM.  
Thus it is trivial to move an existing simulation from
X-PLOR or CHARMM to \NAMD.
A description of these molecular system definition 
files is given in Section \ref{section:formats}.  
\prettypar
In addition, the output file formats used by \NAMD\ 
were chosen to be compatible with X-PLOR and CHARMM.  
In this way the output from \NAMD\ can be analyzed using
X-PLOR, CHARMM, or a variety of the other tools that have 
been developed for the existing output file formats.  
Descriptions of the output files formats are also given in 
Section \ref{section:formats}.


\subsection{File formats}
\label{section:formats}

\subsubsection{PDB files}
The PDB (Protein Data Bank) format is used to store coordinate or velocity data 
being input or output from \NAMD.
This is the standard format for coordinate data
for most other molecular dynamics programs as well, including X-PLOR and CHARMM.
A full description of this file format can be obtained via anonymous FTP from
{\tt ftp.pdb.bnl.gov} in {\tt /pub/format.desc.ps.Z} or {\tt /pub/format.desc.txt}.

\subsubsection{X-PLOR format PSF files}

\NAMD\ uses the same protein structure files that X-PLOR does.
At this time, the
easiest way to generate these files is using X-PLOR or CHARMM,
although it is possible to build them by hand.
CHARMM can generate an X-PLOR format PSF file with the command
``{\tt write psf card xplor}''.

\subsubsection{CHARMM19 and CHARMM22 parameter files}

\NAMD\ supports CHARMM19 and CHARMM22 parameter files in both
X-PLOR and CHARMM formats.
(X-PLOR format is the default, CHARMM format parameter files
may be used given the parameter ``{\tt paraTypeCharmm on}''.)
For a full description of the format of commands 
used in these files, see the X-PLOR and CHARMM User's Manual 
\mycite{(Br\"unger, 1992)}{BRUN92b}.  

\subsubsection{DCD trajectory files}

\NAMD\ produces DCD trajectory files in the same format as 
X-PLOR and CHARMM.  
The DCD files are single precision binary FORTRAN files, 
so are transportable between computer architectures.  
They are not, unfortunately, transportable between big-endian (most
workstations) and little endian (Intel) architectures.
(This same caveat applies to binary velocity and coordinate files.
The utility programs {\tt flipdcd} and {\tt flipbinpdb} are
provided with the Linux/Intel version to reformat these files.)
The exact format of these files is very ugly but supported by 
a wide range of analysis and display programs.  

\subsection{\NAMD\ configuration parameters}
\label{section:file_config}

\paragraph{Input files}

\begin{itemize}
\item
\NAMDCONF{coordinates}{coordinate PDB file}{UNIX filename}
{\label{param:coordinates}
%% This parameter is {\it required\/} for every simulation.  
The PDB file containing initial position coordinate data.  
%% This can be either an absolute or relative path name.  
Note that path names can be either absolute or relative.  
Only one value may be specified.}

\item
\NAMDCONF{structure}{PSF file}{UNIX filename}
{\label{param:structure}
%% This parameter is {\it required\/} for every simulation.
The X-PLOR format PSF file describing the molecular 
system to be simulated.  
Only one value may be specified.}

\item
\NAMDCONF{parameters}{parameter file}{UNIX filename}
{\label{param:parameters}
A CHARMM19 or CHARMM22 parameter file that defines all or part 
of the parameters necessary for the molecular system to be simulated.  
At least one parameter file must be specified for each simulation.  
Multiple definitions are allowed for systems that require more 
than one parameter file.  For example, if three files were needed, 
lines such as:

\bigskip

{\tt parameters param1}

{\tt parameters param2}

{\tt parameters param3}

\bigskip

\noindent could be added to the configuration file.  
The files will be read 
in the order that they appear in the configuration file.  If duplicate
parameters are read, a warning message is printed and the last
parameter value read is used.  Thus, the order that files are read 
can be important in cases where duplicate values appear in 
separate files.}

\item
\NAMDCONFWDEF{paraTypeXplor}{Is the parameter file in X-PLOR format?}{{\tt on} or {\tt off}}{{\tt on}}
{Specifies whether or not the parameter file(s) are in X-PLOR format.
 X-PLOR format is the default for parameter files!
 Caveat: The PSF file should be also constructed with X-PLOR in
 case of an X-PLOR parameter file because X-PLOR stores information
 about the multiplicity of dihedrals in the PSF file. See the X-PLOR
 manual for details.}

\item
\NAMDCONFWDEF{paraTypeCharmm}{Is the parameter file in CHARMM format?}{{\tt on} or {\tt off}}{{\tt off}}
{Specifies whether or not the parameter file(s) are in CHARMM format.
 X-PLOR format is the default for parameter files!
 Caveat: The information about multiplicity of dihedrals will be
 obtained directly from the parameter file, and the full multiplicity
 will be used (same behaviour as in CHARMM). If the PSF file originates
 from X-PLOR, consecutive multiple entries for the same dihedral 
 (indicating the dihedral multiplicity for X-PLOR) will be ignored.}

\item
\NAMDCONF{velocities}{velocity PDB file}{UNIX filename}
{\label{param:velocities}
The PDB file containing the initial velocities for all 
atoms in the simulation.  
This is typically a restart file or final velocity file written 
by \NAMD\ during a previous simulation.  
Either the {\tt temperature} 
or the {\tt velocities}/{\tt binvelocities} 
option must be defined to determine an initial set of velocities.  
Both options cannot be used together.}

\item
\NAMDCONF{binvelocities}{binary velocity file}{UNIX filename}
{\label{param:binvelocities}
The binary file containing initial velocities for all 
atoms in the simulation.  
A binary velocity file is created as output from \NAMD\ 
by activating the {\tt binaryrestart} or {\tt binaryoutput} options.  
The {\tt binvelocities} option should be used as 
an alternative to {\tt velocities}.  
Either the {\tt temperature} 
or the {\tt velocities}/{\tt binvelocities} 
option must be defined to determine an initial set of velocities.  
Both options cannot be used together.  
}

\item
\NAMDCONF{bincoordinates}{binary coordinate restart file}{UNIX filename}
{
The binary restart file containing initial position 
coordinate data.  
A binary coordinate restart file is created as output from \NAMD\ 
by activating the {\tt binaryrestart} or {\tt binaryoutput} options.  
Note that, in the current implementation at least, 
the {\tt bincoordinates} option must be used in addition 
to the {\tt coordinates} option, 
but the positions specified by {\tt coordinates} will then be ignored.  
}

\item
\NAMDCONF{cwd}{default directory}{UNIX directory name}
{The default directory for input and output files.  
If a value is given, all filenames that 
do not begin with a / are assumed to be in this directory.  
For example, if {\tt cwd} is set to {\tt /scr}, then a
filename of {\tt outfile} would be modified to {\tt /scr/outfile}
while a filename of {\tt /tmp/outfile} would remain unchanged.
If no value for {\tt cwd} is specified, than all filenames are 
left unchanged {\em but are assumed to be relative to the directory
which contains the configuration file given on the command line}.}

\end{itemize}

\paragraph{Output files}

\begin{itemize}
\item
\NAMDCONF{outputname}{output PDB file}{UNIX filename prefix}
{\label{param:outputname}
%% This parameter is {\it required\/} for every simulation.
At the end of every simulation, \NAMD\ writes two PDB files, one 
containing the final coordinates and another containing 
the final velocities of all atoms in the simulation.  
This option specifies the file prefix for these two files.  
The position coordinates will be saved to a file named as this prefix 
with {\tt .coor} appended.  
The velocities will be saved to a file 
named as this prefix with {\tt .vel} appended.  
For example, 
if the prefix specified using this option was {\tt /tmp/output}, 
then the two files 
would be {\tt /tmp/output.coor} and {\tt /tmp/output.vel}.}

\item
\NAMDCONFWDEF{binaryoutput}{use binary output files?}
{{\tt yes} or {\tt no}}{{\tt yes}}
{
Activates the use of binary output files.  
If this option is set to {\tt yes}, then the final output files 
will be written in binary rather than PDB format.  
Binary files preserve more accuracy between \NAMD\ restarts 
than ASCII PDB files, 
but the binary files are not guaranteed to be transportable 
between computer architectures.  
(The utility program {\tt flipbinpdb} is provided with the Linux/Intel
version to reformat these files.)
}

\item
\NAMDCONF{restartname}{restart files}{UNIX filename prefix}
{
The prefix to use for restart filenames.  
\NAMD\ produces PDB restart files 
that store the current positions and velocities of all 
atoms at some step of the simulation.  
This option specifies the prefix to use for restart 
files in the same way that {\tt outputname} 
specifies a filename prefix for the final
positions and velocities.  
If {\tt restartname} is defined then
the parameter {\tt restartfreq} must also be defined.}

\item
\NAMDCONF{restartfreq}{frequency of restart file generation}{positive integer}
{
The number of timesteps between the generation of restart files.  
If {\tt restartfreq} is defined, then {\tt restartname} 
must also be defined.}

\item
\NAMDCONFWDEF{binaryrestart}{use binary restart files?}
{{\tt yes} or {\tt no}}{{\tt yes}}
{
Activates the use of binary restart files.  
If this option is set to {\tt yes}, then the restart files
will be written in binary rather than PDB format.  
Binary files preserve more accuracy between \NAMD\ restarts 
than ASCII PDB files, 
but the binary files are not guaranteed to be transportable 
between computer architectures.  
(The utility program {\tt flipbinpdb} is provided with the Linux/Intel
version to reformat these files.)
}

\item
\NAMDCONF{DCDfile}{coordinate trajectory output file}{UNIX filename}
{
The binary DCD position coordinate trajectory filename.  
This file stores the trajectory of all atom position coordinates 
using the same format (binary DCD) as X-PLOR.  
If {\tt DCDfile} is defined, then {\tt DCDfreq} must also be defined.  
}

\item
\NAMDCONF{DCDfreq}
{timesteps between writing coordinates to trajectory file}
{positive integer}
{
The number of timesteps between the writing of position coordinates 
to the trajectory file.  
The initial positions will be included in the trajectory file unless
the {\tt firsttimestep} parameter is set non-zero.
}

\item
\NAMDCONF{velDCDfile}{velocity trajectory output file}{UNIX filename}
{
The binary DCD velocity trajectory filename.  
This file stores the trajectory of 
all atom velocities using the same format (binary DCD) as X-PLOR.  
If {\tt velDCDfile} is defined, then {\tt velDCDfreq} must also 
be defined.  
}

\item
\NAMDCONF{velDCDfreq}
{timesteps between writing velocities to trajectory file}
{positive integer}
{
The number of timesteps between the writing of 
velocities to the trajectory file.  
The initial velocities will be included in the trajectory file unless
the {\tt firsttimestep} parameter is set non-zero.
}

%\item
%\NAMDCONF{electForceDCDfile}
%{electrostatic force trajectory file}
%{UNIX filename prefix}
%{
%The binary DCD short and long range electrostatic force 
%trajectory filename prefix.  
%The short and long range electrostatic force trajectories 
%will be respectively stored in files with 
%{\tt .s} and {\tt .l} appended to this prefix.  
%If {\tt electForceDCDfile} is defined, then {\tt electForceDCDfreq} 
%must also be defined.  
%}
%
%\item
%\NAMDCONF{electForceDCDfreq}
%{timesteps between writing electrostatic forces to trajectory file}
%{positive integer}
%{
%The number of timesteps between writing 
%to the long and short range electrostatic force trajectory files.  
%}
%
%\item
%\NAMDCONF{allForceDCDfile}{total force trajectory file}{UNIX filename}
%{
%The binary DCD total force trajectory filename.  
%This file stores the trajectory of the total forces 
%on each atom.  
%If {\tt allForceDCDfile} is defined, then 
%{\tt allForceDCDfreq} must also be defined.  
%}
%
%\item
%\NAMDCONF{allForceDCDfreq}
%{timesteps between writing total forces to trajectory file}
%{positive integer}
%{
%The number of timesteps between the writing of total forces 
%to the trajectory file.  
%}

\item
\NAMDCONFWDEF{outputEnergies}
{timesteps between energy output}{positive integer}{1}
{
The number of timesteps between each energy output of \NAMD.  
This value
specifies how often \NAMD\ should output the current energy 
values to {\bf stdout} (which can be redirected to a file).  
By default, this is done every step.  
For long simulations, 
the amount of output generated by \NAMD\ can be greatly reduced 
by outputting the energies only occasionally.  
}

\item
\NAMDCONFWDEF{outputMomenta}
{timesteps between momentum output}{nonnegative integer}{0}
{
The number of timesteps between each momentum output of \NAMD.
If specified and nonzero, linear and angular momenta will be
output to {\bf stdout}.
}

\item
\NAMDCONFWDEF{outputTiming}
{timesteps between timing output}{nonnegative integer}{0}
{
The number of timesteps between each timing output of \NAMD.
If specified and nonzero, CPU and wallclock times will be
output to {\bf stdout}.
These data are from node 0 only; CPU times for other nodes
may vary.
}

\end{itemize}

